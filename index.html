<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular Mercadeo</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: #fdecef;
  padding: 20px;
}
h1, h2, h3 {
  text-align: center;
  color: #b83280;
}
.semestre, .humanisticas {
  background: #fff;
  border-radius: 15px;
  padding: 15px;
  margin-bottom: 20px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}
.materia {
  display: flex;
  justify-content: space-between;
  padding: 6px;
  border-bottom: 1px dashed #f3c2d3;
}
.materia.bloqueada {
  opacity: 0.4;
}
.materia.aprobada span {
  text-decoration: line-through;
}
.progress {
  background: #f3c2d3;
  border-radius: 20px;
  overflow: hidden;
  margin: 15px 0;
}
.progress-bar {
  background: #b83280;
  height: 20px;
  width: 0%;
  color: white;
  text-align: center;
  font-size: 12px;
}
</style>
</head>
<body>

<h1>ðŸ“š Malla Curricular â€“ Mercadeo</h1>

<div class="progress">
  <div class="progress-bar" id="barra">0%</div>
</div>
<p style="text-align:center;">
CrÃ©ditos aprobados: <span id="creditos">0</span> |
Avance: <span id="porcentaje">0</span>%
</p>

<div id="contenedor"></div>

<div class="humanisticas">
<h2>ðŸŒ¸ HumanÃ­sticas y Competencias</h2>
<div id="humanisticas"></div>
</div>

<script>
const materias = [
  // SEMESTRE 1
  {id:"fm", nombre:"Fundamentos de Mercadeo", c:3, s:1, pre:[]},
  {id:"ps", nombre:"PsicologÃ­a del Consumidor", c:2, s:1, pre:[]},
  {id:"ti", nombre:"TeorÃ­a de la InvestigaciÃ³n", c:3, s:1, pre:[]},
  {id:"ie", nombre:"IntroducciÃ³n a la EconomÃ­a", c:3, s:1, pre:[]},
  {id:"cd", nombre:"CÃ¡lculo Diferencial e Integral", c:3, s:1, pre:[]},

  // SEMESTRE 2
  {id:"cc", nombre:"Comportamiento del Consumidor", c:2, s:2, pre:["ps"]},
  {id:"mi", nombre:"MetodologÃ­a de la InvestigaciÃ³n", c:3, s:2, pre:[]},
  {id:"me", nombre:"MicroeconomÃ­a", c:3, s:2, pre:["ie"]},
  {id:"am", nombre:"Ãlgebra de Matrices y Prog. Lineal", c:3, s:2, pre:[]},
  {id:"ad", nombre:"AdministraciÃ³n", c:2, s:2, pre:[]},

  // SEMESTRE 3
  {id:"lc", nombre:"LegislaciÃ³n Comercial", c:3, s:3, pre:[]},
  {id:"gp", nombre:"Gerencia del Producto", c:3, s:3, pre:[]},
  {id:"ma", nombre:"MacroeconomÃ­a", c:3, s:3, pre:[]},
  {id:"e1", nombre:"EstadÃ­stica I", c:3, s:3, pre:[]},
  {id:"co", nombre:"Contabilidad Financiera y Costos", c:2, s:3, pre:[]},

  // SEMESTRE 4
  {id:"ms", nombre:"Mercadeo de Servicios", c:3, s:4, pre:[]},
  {id:"gpr", nombre:"Gerencia de Precio", c:3, s:4, pre:["cc"]},
  {id:"lab", nombre:"Laboratorio del Consumidor", c:3, s:4, pre:[]},
  {id:"eco", nombre:"EconomÃ­a Colombiana", c:3, s:4, pre:[]},
  {id:"e2", nombre:"EstadÃ­stica II", c:3, s:4, pre:["e1"]},

  // SEMESTRE 5
  {id:"mix", nombre:"Mix de ComunicaciÃ³n", c:3, s:5, pre:["fm"]},
  {id:"emp", nombre:"Empaques y Embalajes", c:3, s:5, pre:["fm"]},
  {id:"green", nombre:"Green Marketing", c:2, s:5, pre:[]},
  {id:"sim", nombre:"Sistema de InformaciÃ³n de Mercados", c:3, s:5, pre:[]},
  {id:"mf", nombre:"MatemÃ¡tica Financiera", c:3, s:5, pre:[]},

  // SEMESTRE 6
  {id:"mp", nombre:"Mercadeo Promocional y Merchandising", c:3, s:6, pre:["mix"]},
  {id:"pub", nombre:"Publicidad", c:3, s:6, pre:["mix"]},
  {id:"empn", nombre:"Empresarismo e Idea de Negocios", c:2, s:6, pre:[]},
  {id:"melec", nombre:"Mercadeo ElectrÃ³nico", c:3, s:6, pre:[]},
  {id:"ic", nombre:"InvestigaciÃ³n Cualitativa", c:3, s:6, pre:["sim"]},

  // SEMESTRE 7
  {id:"mi1", nombre:"Mercadeo Internacional I", c:3, s:7, pre:[]},
  {id:"icu", nombre:"InvestigaciÃ³n Cuantitativa", c:3, s:7, pre:["ic"]},
  {id:"mes", nombre:"Mercadeo EstratÃ©gico", c:3, s:7, pre:[]},
  {id:"fp", nombre:"FormulaciÃ³n y Eval. de Proyectos", c:3, s:7, pre:["mf"]},

  // SEMESTRE 8
  {id:"mi2", nombre:"Mercadeo Internacional II", c:3, s:8, pre:["mi1"]},
  {id:"gm", nombre:"Gerencia de Marca", c:3, s:8, pre:["gp"]},
  {id:"gv", nombre:"Gerencia de Ventas", c:3, s:8, pre:["mes"]},
  {id:"stg", nombre:"Seminario Trabajo de Grado", c:3, s:8, pre:["mi"]},

  // SEMESTRE 9
  {id:"pem", nombre:"Plan EstratÃ©gico de Mercadeo", c:3, s:9, pre:["gm","gv"]},
  {id:"im", nombre:"Inteligencia de Mercados", c:3, s:9, pre:[]},
  {id:"gdl", nombre:"Gerencia de DistribuciÃ³n y LogÃ­stica", c:3, s:9, pre:[]},
  {id:"ni", nombre:"Negocios Internacionales", c:3, s:9, pre:[]},

  // SEMESTRE 10
  {id:"pp", nombre:"PrÃ¡ctica Profesional", c:11, s:10, pre:["pem"]}
];

const humanisticas = [
 {id:"h1", nombre:"Humanismo", c:2},
 {id:"h2", nombre:"Cultura artÃ­stica y fÃ­sica", c:2},
 {id:"h3", nombre:"FormaciÃ³n ciudadana", c:2},
 {id:"h4", nombre:"ProblemÃ¡ticas de contexto", c:2},
 {id:"c1", nombre:"Lectura y producciÃ³n de textos I", c:1},
 {id:"c2", nombre:"Lectura y producciÃ³n de textos II", c:1},
 {id:"c3", nombre:"Lenguaje y herramientas informÃ¡ticas", c:2}
];

let estado = JSON.parse(localStorage.getItem("estado")) || {};

function puede(id){
  const m = materias.find(x=>x.id===id);
  return m.pre.every(p=>estado[p]);
}

function toggle(id){
  if(!puede(id)) return;
  estado[id] = !estado[id];
  localStorage.setItem("estado",JSON.stringify(estado));
  render();
}

function render(){
  let cont = document.getElementById("contenedor");
  cont.innerHTML="";
  let total=0;

  for(let s=1;s<=10;s++){
    let div=document.createElement("div");
    div.className="semestre";
    div.innerHTML=`<h3>Semestre ${s}</h3>`;
    materias.filter(m=>m.s===s).forEach(m=>{
      let d=document.createElement("div");
      d.className="materia";
      if(!puede(m.id)) d.classList.add("bloqueada");
      if(estado[m.id]){d.classList.add("aprobada"); total+=m.c;}
      d.innerHTML=`<span>${m.nombre} (${m.c})</span>
      <input type="checkbox" ${estado[m.id]?"checked":""} ${puede(m.id)?"":"disabled"} onclick="toggle('${m.id}')">`;
      div.appendChild(d);
    });
    cont.appendChild(div);
  }

  humanisticas.forEach(h=>{
    if(estado[h.id]) total+=h.c;
  });

  document.getElementById("creditos").innerText=total;
  let porcentaje=Math.round((total/170)*100);
  document.getElementById("porcentaje").innerText=porcentaje;
  let bar=document.getElementById("barra");
  bar.style.width=porcentaje+"%";
  bar.innerText=porcentaje+"%";

  let hdiv=document.getElementById("humanisticas");
  hdiv.innerHTML="";
  humanisticas.forEach(h=>{
    hdiv.innerHTML+=`
    <div class="materia ${estado[h.id]?"aprobada":""}">
      <span>${h.nombre} (${h.c})</span>
      <input type="checkbox" ${estado[h.id]?"checked":""}
      onclick="estado['${h.id}']=!estado['${h.id}'];localStorage.setItem('estado',JSON.stringify(estado));render();">
    </div>`;
  });
}

render();
</script>

</body>
</html>
