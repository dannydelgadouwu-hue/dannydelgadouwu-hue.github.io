<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular Mercadeo</title>

<style>
body{
  font-family:'Poppins', Arial, sans-serif;
  background:linear-gradient(180deg,#ffe6f0,#fff);
  padding:20px;
  color:#4a2c3a;
}
h1{text-align:center;color:#d63384;}
h2{color:#c2185b;}
.semestre{
  background:#fff0f6;
  border-radius:22px;
  padding:15px;
  margin-bottom:20px;
  box-shadow:0 6px 15px rgba(214,51,132,.18);
}
.materia{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin:6px 0;
  background:#ffffff;
  padding:8px 12px;
  border-radius:14px;
  opacity:1;
}
.materia.bloqueada{
  opacity:.4;
}
input[type=checkbox]{
  accent-color:#d63384;
  transform:scale(1.2);
  margin-right:8px;
}
progress{
  width:100%;
  height:22px;
  border-radius:20px;
}
progress::-webkit-progress-bar{background:#ffd6e8;}
progress::-webkit-progress-value{
  background:linear-gradient(90deg,#ff8dc7,#d63384);
}
#porcentaje{text-align:center;font-weight:bold;}
</style>
</head>

<body>

<h1> Malla Curricular Mercadeo </h1>

<progress id="barra" value="0" max="165"></progress>
<p id="porcentaje">0% completado</p>

<div id="malla"></div>

<script>
const materias=[
{ id:"eco", n:1, nombre:"Introducci贸n a la Econom铆a", cr:3 },
{ id:"micro", n:2, nombre:"Microeconom铆a", cr:3, req:["eco"] },

{ id:"psi", n:1, nombre:"Psicolog铆a del Consumidor", cr:2 },
{ id:"comp", n:2, nombre:"Comportamiento del Consumidor", cr:2, req:["psi"] },

{ id:"est1", n:3, nombre:"Estad铆stica I", cr:3 },
{ id:"est2", n:4, nombre:"Estad铆stica II", cr:3, req:["est1"] },

{ id:"fund", n:1, nombre:"Fundamentos de Mercadeo", cr:3 },
{ id:"mix", n:5, nombre:"Mix de Comunicaci贸n", cr:3, req:["fund"] },

{ id:"qual", n:6, nombre:"Investigaci贸n de Mercados Cualitativa", cr:3 },
{ id:"quant", n:7, nombre:"Investigaci贸n de Mercados Cuantitativa", cr:3, req:["qual"] },

{ id:"int1", n:7, nombre:"Mercadeo Internacional I", cr:3 },
{ id:"int2", n:8, nombre:"Mercadeo Internacional II", cr:3, req:["int1"] },

{ id:"marca", n:8, nombre:"Gerencia de Marca", cr:3, req:["producto"] },
{ id:"producto", n:3, nombre:"Gerencia del Producto", cr:3 }
];

const malla=document.getElementById("malla");
const semestres={};

materias.forEach(m=>{
  if(!semestres[m.n]){
    semestres[m.n]=document.createElement("div");
    semestres[m.n].className="semestre";
    semestres[m.n].innerHTML=`<h2> Semestre ${m.n}</h2>`;
    malla.appendChild(semestres[m.n]);
  }
  let d=document.createElement("div");
  d.className="materia";
  d.id="box-"+m.id;
  d.innerHTML=`<label><input type="checkbox" id="${m.id}" data-creditos="${m.cr}"> ${m.nombre}</label><span>${m.cr} cr</span>`;
  semestres[m.n].appendChild(d);
});

function actualizar(){
  let total=0;
  document.querySelectorAll("input[type=checkbox]").forEach(c=>{
    if(c.checked) total+=Number(c.dataset.creditos);
  });
  document.getElementById("barra").value=total;
  document.getElementById("porcentaje").innerText=Math.round(total/165*100)+"% completado ";
  desbloquear();
}

function desbloquear(){
  materias.forEach(m=>{
    if(m.req){
      const box=document.getElementById("box-"+m.id);
      const check=document.getElementById(m.id);
      const ok=m.req.every(r=>document.getElementById(r).checked);
      check.disabled=!ok;
      box.classList.toggle("bloqueada",!ok);
    }
  });
}

document.querySelectorAll("input").forEach(c=>c.addEventListener("change",actualizar));
desbloquear();
</script>

</body>
</html>
