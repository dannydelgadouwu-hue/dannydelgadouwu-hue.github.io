<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Malla Curricular Mercadeo</title>
<style>
body{
  font-family: Arial, sans-serif;
  background:#fde6ef;
  margin:0;
  padding:20px;
  color:#444;
}
h1,h2,h3{
  color:#b84a7a;
}
.semestre, .humanisticas{
  background:#fff0f6;
  border-radius:15px;
  padding:15px;
  margin-bottom:20px;
  box-shadow:0 4px 8px rgba(0,0,0,0.05);
}
.materia{
  display:flex;
  align-items:center;
  margin:6px 0;
}
.materia input{
  margin-right:10px;
}
.materia.bloqueada{
  opacity:0.4;
}
.materia.aprobada span{
  text-decoration:line-through;
}
.progress-container{
  background:#f7b3c9;
  border-radius:20px;
  overflow:hidden;
  margin:10px 0 20px;
}
.progress-bar{
  height:20px;
  background:#b84a7a;
  width:0%;
  transition:0.4s;
}
.info{
  margin-bottom:10px;
  font-weight:bold;
}
</style>
</head>

<body>

<h1>üìö Mi Malla Curricular ‚Äì Mercadeo</h1>

<div class="info">
  Cr√©ditos aprobados: <span id="creditosActuales">0</span> / <span id="creditosTotales">0</span>
</div>
<div class="info">
  Avance de la carrera: <span id="porcentaje">0%</span>
</div>
<div class="progress-container">
  <div class="progress-bar" id="barra"></div>
</div>

<!-- SEMESTRE 1 -->
<div class="semestre">
<h2>Semestre 1</h2>
<div class="materia" data-id="intro_economia" data-creditos="3">
  <input type="checkbox">
  <span>Introducci√≥n a la Econom√≠a (3)</span>
</div>
<div class="materia" data-id="fundamentos_marketing" data-creditos="3">
  <input type="checkbox">
  <span>Fundamentos de Marketing (3)</span>
</div>
</div>

<!-- SEMESTRE 2 -->
<div class="semestre">
<h2>Semestre 2</h2>
<div class="materia bloqueada" data-id="microeconomia" data-creditos="3" data-req="intro_economia">
  <input type="checkbox" disabled>
  <span>Microeconom√≠a (3)</span>
</div>
<div class="materia bloqueada" data-id="comportamiento_consumidor" data-creditos="3" data-req="fundamentos_marketing">
  <input type="checkbox" disabled>
  <span>Comportamiento del Consumidor (3)</span>
</div>
</div>

<!-- SEMESTRE 3 -->
<div class="semestre">
<h2>Semestre 3</h2>
<div class="materia bloqueada" data-id="investigacion_mercados" data-creditos="3" data-req="comportamiento_consumidor">
  <input type="checkbox" disabled>
  <span>Investigaci√≥n de Mercados (3)</span>
</div>
</div>

<!-- HUMAN√çSTICAS -->
<div class="humanisticas">
<h2>üå± Formaci√≥n Human√≠stica</h2>
<div class="materia" data-id="humanistica1" data-creditos="2">
  <input type="checkbox">
  <span>Human√≠stica I (2)</span>
</div>
<div class="materia" data-id="humanistica2" data-creditos="2">
  <input type="checkbox">
  <span>Human√≠stica II (2)</span>
</div>
</div>

<script>
const materias = document.querySelectorAll('.materia');
const creditosActualesEl = document.getElementById('creditosActuales');
const creditosTotalesEl = document.getElementById('creditosTotales');
const barra = document.getElementById('barra');
const porcentajeEl = document.getElementById('porcentaje');

let totalCreditos = 0;
materias.forEach(m => totalCreditos += parseInt(m.dataset.creditos));
creditosTotalesEl.textContent = totalCreditos;

function actualizar(){
  let aprobados = 0;
  materias.forEach(m=>{
    const chk = m.querySelector('input');
    if(chk.checked){
      aprobados += parseInt(m.dataset.creditos);
      m.classList.add('aprobada');
    }else{
      m.classList.remove('aprobada');
    }
  });

  creditosActualesEl.textContent = aprobados;
  const porcentaje = Math.round((aprobados / totalCreditos) * 100);
  barra.style.width = porcentaje + '%';
  porcentajeEl.textContent = porcentaje + '%';

  // desbloqueo
  materias.forEach(m=>{
    const req = m.dataset.req;
    if(req){
      const cumplida = document.querySelector(`[data-id="${req}"] input`).checked;
      const chk = m.querySelector('input');
      if(cumplida){
        m.classList.remove('bloqueada');
        chk.disabled = false;
      }
    }
  });

  // guardar
  const estado = {};
  materias.forEach(m=>{
    estado[m.dataset.id] = m.querySelector('input').checked;
  });
  localStorage.setItem('malla', JSON.stringify(estado));
}

materias.forEach(m=>{
  m.querySelector('input').addEventListener('change', actualizar);
});

// cargar progreso
const guardado = JSON.parse(localStorage.getItem('malla') || '{}');
materias.forEach(m=>{
  if(guardado[m.dataset.id]){
    m.querySelector('input').checked = true;
  }
});
actualizar();
</script>

</body>
</html>
